<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food Coherence | Bioelectric Nutrition & Metabolic Research</title>
    <!-- PDF Library for Calculator Export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        /* --- MEDICAL PROFESSIONAL THEME & CSS --- */
        :root {
            --primary-blue: #0047AB; /* Cobalt Blue #0047AB from Source [5] */
            --dark-navy: #0F172A;
            --medical-light: #F8FAFC;
            --text-grey: #334155;
            --alert-red: #B91C1C;
            --warning-orange: #EA580C;
            --success-green: #15803D;
            --white: #ffffff;
            --border-color: #cbd5e1;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; line-height: 1.6; color: var(--text-grey); background-color: var(--medical-light); }

        /* TYPOGRAPHY */
        h1, h2, h3 { color: var(--dark-navy); font-weight: 700; }
        h1 { font-size: 2.5rem; letter-spacing: -0.02em; }
        h2 { font-size: 2rem; margin-bottom: 1rem; position: relative; }
        h2::after { content: ''; display: block; width: 60px; height: 4px; background: var(--primary-blue); margin-top: 10px; }
        
        /* HEADER */
        header { background-color: var(--white); box-shadow: 0 2px 10px rgba(0,0,0,0.1); position: fixed; width: 100%; top: 0; z-index: 1000; }
        .nav-container { max-width: 1200px; margin: 0 auto; padding: 1rem 2rem; display: flex; justify-content: space-between; align-items: center; }
        
        /* UPDATED LOGO NAME */
        .logo { font-size: 1.6rem; font-weight: 800; color: var(--dark-navy); text-transform: uppercase; letter-spacing: 1px; }
        .logo span { color: var(--primary-blue); }

        nav ul { display: flex; list-style: none; gap: 2rem; }
        nav a { text-decoration: none; color: var(--dark-navy); font-weight: 600; text-transform: uppercase; font-size: 0.9rem; transition: color 0.3s; }
        nav a:hover { color: var(--primary-blue); }
        
        /* HERO */
        .hero { margin-top: 80px; background: linear-gradient(135deg, var(--dark-navy) 0%, #1e293b 100%); color: var(--white); padding: 5rem 2rem; text-align: center; }
        .hero p { max-width: 700px; margin: 1rem auto; font-size: 1.2rem; opacity: 0.9; }

        .container { max-width: 1200px; margin: 0 auto; padding: 4rem 2rem; }

        /* GRID SYSTEMS */
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 3rem; align-items: start; margin-bottom: 4rem; }
        .grid-1-3 { display: grid; grid-template-columns: 1fr 2fr; gap: 3rem; align-items: center; }

        /* FIGURE/IMAGE STYLES */
        figure {
            background: var(--white);
            border: 1px solid #e2e8f0;
            padding: 1rem;
            border-radius: 8px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            margin: 0;
        }
        figure img {
            width: 100%;
            height: auto;
            border-radius: 4px;
            display: block;
        }
        figcaption {
            font-size: 0.85rem;
            color: #64748b;
            margin-top: 0.8rem;
            text-align: center;
            font-style: italic;
            border-top: 1px solid #f1f5f9;
            padding-top: 0.5rem;
        }

        /* CALCULATOR STYLES */
        .calc-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            background: var(--white);
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            overflow: hidden;
            border: 1px solid var(--border-color);
            margin-top: 2rem;
        }
        .calc-inputs { padding: 2rem; background-color: #f8fafc; border-right: 1px solid #e2e8f0; }
        .calc-dashboard { padding: 2rem; background-color: var(--white); position: relative; }
        
        label { display: block; font-weight: 700; margin-bottom: 0.5rem; color: var(--dark-navy); font-size: 0.9rem; }
        select, input[type="range"] { width: 100%; margin-bottom: 1.5rem; }
        select { padding: 0.8rem; border: 1px solid #cbd5e1; border-radius: 6px; font-size: 1rem; background-color: var(--white); }
        
        /* Dashboard Visuals */
        .score-circle {
            width: 180px; height: 180px; border-radius: 50%;
            background: conic-gradient(var(--score-color) var(--score-percent), #e2e8f0 0);
            margin: 0 auto 2rem auto; position: relative;
            display: flex; align-items: center; justify-content: center;
        }
        .score-inner { width: 140px; height: 140px; background: var(--white); border-radius: 50%; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .score-number { font-size: 2.5rem; font-weight: 800; color: var(--dark-navy); line-height: 1; }
        .risk-badge { text-align: center; padding: 0.8rem; border-radius: 6px; font-weight: 700; color: var(--white); text-transform: uppercase; margin-bottom: 1.5rem; }
        .metrics-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; font-size: 0.85rem; }
        .metric-item { padding: 0.5rem; border-bottom: 1px solid #e2e8f0; display: flex; justify-content: space-between; }
        
        .btn-export { width: 100%; padding: 1rem; background-color: var(--dark-navy); color: var(--white); border: none; border-radius: 6px; font-weight: 700; cursor: pointer; margin-top: 2rem; text-transform: uppercase; }
        .btn-export:hover { background-color: var(--primary-blue); }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .grid-2, .grid-1-3, .calc-wrapper { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <!-- NAVIGATION -->
    <header>
        <div class="nav-container">
            <!-- UPDATED SITE NAME -->
            <div class="logo">Food <span>Coherence</span></div>
            <nav>
                <ul>
                    <li><a href="#paradigm">Paradigm</a></li>
                    <li><a href="#toxemia">Toxemia</a></li>
                    <li><a href="#upstream">Upstream</a></li>
                    <li><a href="#calculator">Calculator</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="hero">
        <div class="container">
            <h1>The Physics of Nutrition</h1>
            <p>Moving beyond chemical composition to understand food as a bioelectric instructional signal.</p>
        </div>
    </div>

    <!-- SECTION 1: THE BIOELECTRIC PARADIGM -->
    <section id="paradigm" class="container">
        <div class="grid-2">
            <div>
                <h2>1. Food as a Bioelectric Signal</h2>
                <p>Current nutrition models view food merely as fuel (calories) or building blocks (nutrients). The <strong>Food Coherence System (FCS)</strong> redefines food as an information signal that modulates the body's collective intelligence.</p>
                <p><strong>Coherent Food (Whole):</strong> Stabilizes cellular membrane potentials and supports high mitochondrial voltage ($\Delta\psi_m$). It acts as a clear instruction.</p>
                <p><strong>Incoherent Food (UPF):</strong> Ultra-Processed Foods introduce "Bioelectric Mutagens"â€”dietary exposures that create signaling noise (static), causing cells to depolarize and drift from their target morphology [1].</p>
            </div>
            <!-- FIGURE 1 -->
            <figure>
                <img src="images/bioelectric_signal.jpeg" alt="Comparison of Coherent vs Incoherent Signals">
                <figcaption>Figure 1: Visualizing the Signal. Coherent food (left) maintains smooth bioelectric oscillation. Incoherent food (right) introduces 'static' and voltage suppression. (Source: Food Coherence Bioelectric Signal [1])</figcaption>
            </figure>
        </div>
    </section>

    <!-- SECTION 2: METABOLIC TOXEMIA -->
    <section id="toxemia" style="background-color: var(--white); padding: 4rem 0;">
        <div class="container">
            <div class="grid-2">
                <!-- FIGURE 2 -->
                <figure>
                    <img src="images/toxemia_mechanism.jpg" alt="Metabolic Toxemia Mechanism">
                    <figcaption>Figure 2: The 'Quarantine Zone' Hypothesis. Adipose tissue acts as a buffer to sequester lipophilic toxins found in processed additives [2].</figcaption>
                </figure>
                <div>
                    <h2>2. Metabolic Toxemia & The Quarantine Zone</h2>
                    <p>Why do bodies resist weight loss? The FCS proposes that obesity is often a functional defense mechanism, not a failure of will.</p>
                    <ul style="margin-left: 1.5rem; margin-bottom: 1.5rem;">
                        <li><strong>The Breach:</strong> Emulsifiers erode the gut mucus layer, allowing endotoxins (LPS) to enter the blood [6].</li>
                        <li><strong>The Response:</strong> The immune system initiates a "Cold War" of chronic inflammation.</li>
                        <li><strong>The Quarantine:</strong> To protect vital organs (Heart, Liver, Brain), the body sequesters lipophilic toxins (preservatives, plasticizers) into adipose tissue (fat cells) [2].</li>
                    </ul>
                    <p style="color: var(--alert-red); font-weight: 600;">Clinical Implication: Rapid weight loss can trigger "re-intoxication" as toxins are released, causing the body to halt fat burning as a survival strategy [7].</p>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION 3: UPSTREAM DETERMINANTS -->
    <section id="upstream" class="container">
        <div class="grid-1-3">
            <div>
                <h2>3. The Upstream Address</h2>
                <p>Chronic disease is a predictable output of industrial design. Individual choices occur downstream of structural determinants: <strong>Subsidies, Processing, and Opacity</strong> [8].</p>
                <p>We cannot solve a systemic problem with individual willpower alone. We must re-engineer the default [9].</p>
            </div>
            <!-- FIGURE 3 -->
            <figure>
                <img src="images/upstream_address.png" alt="The Upstream Drivers of Chronic Disease">
                <figcaption>Figure 3: The 3-Pillar Strategic Plan to re-engineer the food system. Shifting from 'Individual Choice' to 'System Design' [3].</figcaption>
            </figure>
        </div>
    </section>

    <!-- SECTION 4: CALCULATOR & LABEL -->
    <section id="calculator" style="background-color: #f1f5f9; padding: 4rem 0;">
        <div class="container">
            <h2>4. Clinical Coherence Calculator</h2>
            <p>Evaluate matrix integrity and metabolic risk. This tool approximates the proposed <strong>Food Coherence Score</strong> [4].</p>

            <div class="calc-wrapper">
                <!-- LEFT: INPUTS -->
                <div class="calc-inputs">
                    <h3 style="color: var(--primary-blue); margin-bottom: 1rem;">Assessment Parameters</h3>
                    
                    <label>NOVA Category (Processing Level)</label>
                    <select id="nova-select" onchange="updateCalculator()">
                        <option value="1">NOVA 1: Unprocessed / Minimally Processed</option>
                        <option value="2">NOVA 2: Processed Culinary Ingredients</option>
                        <option value="3">NOVA 3: Processed Foods</option>
                        <option value="4" selected>NOVA 4: Ultra-Processed Food (UPF)</option>
                    </select>

                    <div id="food-examples" style="background:#e2e8f0; padding:10px; font-size:0.85rem; margin-bottom:1.5rem; border-left:3px solid var(--primary-blue);">
                        Examples: Soft drinks, nuggets, reconstituted meats.
                    </div>

                    <label>Mitochondrial Voltage ($\Delta\psi_m$) Support</label>
                    <input type="range" id="voltage-slider" min="0" max="10" value="2" oninput="updateCalculator()">
                    
                    <label>Matrix Fragmentation (Disruption)</label>
                    <input type="range" id="fragmentation-slider" min="0" max="10" value="8" oninput="updateCalculator()">

                    <label>Inflammatory Noise (Bioelectric Mutagens)</label>
                    <input type="range" id="noise-slider" min="0" max="10" value="9" oninput="updateCalculator()">
                </div>

                <!-- RIGHT: VISUAL DASHBOARD -->
                <div class="calc-dashboard" id="clinical-report">
                    <h3 style="text-align: center; margin-bottom: 1rem;">Bioelectric Integrity Monitor</h3>
                    
                    <!-- DYNAMIC VISUAL -->
                    <div class="score-circle" id="score-circle">
                        <div class="score-inner">
                            <div class="score-number" id="score-display">--</div>
                            <div class="score-label">Coherence</div>
                        </div>
                    </div>

                    <div id="risk-badge" class="risk-badge" style="background-color: var(--alert-red);">CALCULATING...</div>

                    <!-- FIGURE 4: THE LABEL (Small visual context) -->
                    <figure style="margin-bottom: 1rem; padding: 0.5rem;">
                        <img src="images/coherence_label.jpeg" alt="Food Coherence Label Example">
                        <figcaption style="font-size: 0.7rem;">Target Output: The Food Coherence Label [4].</figcaption>
                    </figure>

                    <div class="metrics-grid">
                        <div class="metric-item"><span>Matrix State:</span><span id="metric-integrity">Fragmented</span></div>
                        <div class="metric-item"><span>Immune ID:</span><span id="metric-immune">Foreign (Noise)</span></div>
                    </div>

                    <button class="btn-export" id="export-btn" onclick="generatePDF()">Download Clinical PDF</button>
                </div>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer style="background:var(--dark-navy); color: #94a3b8; padding: 3rem 2rem; text-align: center; font-size: 0.9rem;">
        <div class="container">
            <p>&copy; 2026 Food Coherence Research Initiative.</p>
            <p style="margin-top: 1rem;">Based on the "Prevent-OO 2026" research call and associated perspective papers [10][11].<br>This tool is for educational purposes only.</p>
        </div>
    </footer>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        const novaData = {
            1: { base: 95, desc: "Examples: Fresh fruits, raw meat, eggs. <br>(Signal: High Fidelity)" },
            2: { base: 75, desc: "Examples: Butter, salt, oils, sugar. <br>(Signal: Moderate)" },
            3: { base: 55, desc: "Examples: Canned vegetables, fresh bread, cheese. <br>(Signal: Altered Matrix)" },
            4: { base: 25, desc: "Examples: Soft drinks, nuggets, reconstituted meats. <br>(Signal: Bioelectric Noise)" }
        };

        function updateCalculator() {
            const novaLevel = document.getElementById('nova-select').value;
            const voltage = parseInt(document.getElementById('voltage-slider').value);
            const frag = parseInt(document.getElementById('fragmentation-slider').value);
            const noise = parseInt(document.getElementById('noise-slider').value);

            // Update Examples
            document.getElementById('food-examples').innerHTML = novaData[novaLevel].desc;

            // Algorithm: Base +/- Modifiers
            let baseScore = novaData[novaLevel].base;
            let positive = (voltage) * 2; 
            let negative = (frag + noise) * 1.5; 
            let finalScore = Math.round(Math.max(0, Math.min(100, baseScore + positive - negative)));

            // Update UI
            const scoreDisplay = document.getElementById('score-display');
            const scoreCircle = document.getElementById('score-circle');
            const riskBadge = document.getElementById('risk-badge');

            scoreDisplay.innerText = finalScore;

            let color, label, integrity, immune;
            if (finalScore >= 80) {
                color = "var(--success-green)"; label = "ðŸŸ¢ LOW RISK (Coherent)";
                integrity = "Intact"; immune = "Compatible";
            } else if (finalScore >= 50) {
                color = "var(--warning-orange)"; label = "ðŸŸ  MODERATE RISK";
                integrity = "Partial Loss"; immune = "Alert";
            } else {
                color = "var(--alert-red)"; label = "ðŸ”´ HIGH RISK (Mutagen)";
                integrity = "Destroyed"; immune = "Inflammatory";
            }

            scoreCircle.style.setProperty('--score-color', color);
            scoreCircle.style.setProperty('--score-percent', finalScore + '%');
            riskBadge.style.backgroundColor = color;
            riskBadge.innerText = label;
            document.getElementById('metric-integrity').innerText = integrity;
            document.getElementById('metric-immune').innerText = immune;
        }

        function generatePDF() {
            const element = document.getElementById('clinical-report');
            const btn = document.getElementById('export-btn');
            btn.style.display = 'none';
            html2pdf().set({ margin: 0.5, filename: 'Food_Coherence_Report.pdf', image: { type: 'jpeg', quality: 0.98 }, html2canvas: { scale: 2 }, jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' } }).from(element).save().then(() => { btn.style.display = 'block'; });
        }

        window.onload = updateCalculator;
    </script>
</body>
</html>
